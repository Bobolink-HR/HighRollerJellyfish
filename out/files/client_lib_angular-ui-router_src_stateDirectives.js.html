<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>client/lib/angular-ui-router/src/stateDirectives.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/classroom.html">classroom</a></li>
                                <li><a href="../classes/classroom.attendance.html">classroom.attendance</a></li>
                                <li><a href="../classes/classroom.AttendanceService.html">classroom.AttendanceService</a></li>
                                <li><a href="../classes/classroom.AuthFactory.html">classroom.AuthFactory</a></li>
                                <li><a href="../classes/classroom.grades.html">classroom.grades</a></li>
                                <li><a href="../classes/classroom.GradeService.html">classroom.GradeService</a></li>
                                <li><a href="../classes/classroom.LessonService.html">classroom.LessonService</a></li>
                                <li><a href="../classes/classroom.login.html">classroom.login</a></li>
                                <li><a href="../classes/classroom.signup.html">classroom.signup</a></li>
                                <li><a href="../classes/classroom.syllabus.html">classroom.syllabus</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/ng.html">ng</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: client/lib/angular-ui-router/src/stateDirectives.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
function parseStateRef(ref, current) {
  var preparsed = ref.match(/^\s*({[^}]*})\s*$/), parsed;
  if (preparsed) ref = current + &#x27;(&#x27; + preparsed[1] + &#x27;)&#x27;;
  parsed = ref.replace(/\n/g, &quot; &quot;).match(/^([^(]+?)\s*(\((.*)\))?$/);
  if (!parsed || parsed.length !== 4) throw new Error(&quot;Invalid state ref &#x27;&quot; + ref + &quot;&#x27;&quot;);
  return { state: parsed[1], paramExpr: parsed[3] || null };
}

function stateContext(el) {
  var stateData = el.parent().inheritedData(&#x27;$uiView&#x27;);

  if (stateData &amp;&amp; stateData.state &amp;&amp; stateData.state.name) {
    return stateData.state;
  }
}

/**
 * @ngdoc directive
 * @name ui.router.state.directive:ui-sref
 *
 * @requires ui.router.state.$state
 * @requires $timeout
 *
 * @restrict A
 *
 * @description
 * A directive that binds a link (&#x60;&lt;a&gt;&#x60; tag) to a state. If the state has an associated 
 * URL, the directive will automatically generate &amp; update the &#x60;href&#x60; attribute via 
 * the {@link ui.router.state.$state#methods_href $state.href()} method. Clicking 
 * the link will trigger a state transition with optional parameters. 
 *
 * Also middle-clicking, right-clicking, and ctrl-clicking on the link will be 
 * handled natively by the browser.
 *
 * You can also use relative state paths within ui-sref, just like the relative 
 * paths passed to &#x60;$state.go()&#x60;. You just need to be aware that the path is relative
 * to the state that the link lives in, in other words the state that loaded the 
 * template containing the link.
 *
 * You can specify options to pass to {@link ui.router.state.$state#go $state.go()}
 * using the &#x60;ui-sref-opts&#x60; attribute. Options are restricted to &#x60;location&#x60;, &#x60;inherit&#x60;,
 * and &#x60;reload&#x60;.
 *
 * @example
 * Here&#x27;s an example of how you&#x27;d use ui-sref and how it would compile. If you have the 
 * following template:
 * &lt;pre&gt;
 * &lt;a ui-sref=&quot;home&quot;&gt;Home&lt;/a&gt; | &lt;a ui-sref=&quot;about&quot;&gt;About&lt;/a&gt; | &lt;a ui-sref=&quot;{page: 2}&quot;&gt;Next page&lt;/a&gt;
 * 
 * &lt;ul&gt;
 *     &lt;li ng-repeat=&quot;contact in contacts&quot;&gt;
 *         &lt;a ui-sref=&quot;contacts.detail({ id: contact.id })&quot;&gt;{{ contact.name }}&lt;/a&gt;
 *     &lt;/li&gt;
 * &lt;/ul&gt;
 * &lt;/pre&gt;
 * 
 * Then the compiled html would be (assuming Html5Mode is off and current state is contacts):
 * &lt;pre&gt;
 * &lt;a href=&quot;#/home&quot; ui-sref=&quot;home&quot;&gt;Home&lt;/a&gt; | &lt;a href=&quot;#/about&quot; ui-sref=&quot;about&quot;&gt;About&lt;/a&gt; | &lt;a href=&quot;#/contacts?page=2&quot; ui-sref=&quot;{page: 2}&quot;&gt;Next page&lt;/a&gt;
 * 
 * &lt;ul&gt;
 *     &lt;li ng-repeat=&quot;contact in contacts&quot;&gt;
 *         &lt;a href=&quot;#/contacts/1&quot; ui-sref=&quot;contacts.detail({ id: contact.id })&quot;&gt;Joe&lt;/a&gt;
 *     &lt;/li&gt;
 *     &lt;li ng-repeat=&quot;contact in contacts&quot;&gt;
 *         &lt;a href=&quot;#/contacts/2&quot; ui-sref=&quot;contacts.detail({ id: contact.id })&quot;&gt;Alice&lt;/a&gt;
 *     &lt;/li&gt;
 *     &lt;li ng-repeat=&quot;contact in contacts&quot;&gt;
 *         &lt;a href=&quot;#/contacts/3&quot; ui-sref=&quot;contacts.detail({ id: contact.id })&quot;&gt;Bob&lt;/a&gt;
 *     &lt;/li&gt;
 * &lt;/ul&gt;
 *
 * &lt;a ui-sref=&quot;home&quot; ui-sref-opts=&quot;{reload: true}&quot;&gt;Home&lt;/a&gt;
 * &lt;/pre&gt;
 *
 * @param {string} ui-sref &#x27;stateName&#x27; can be any valid absolute or relative state
 * @param {Object} ui-sref-opts options to pass to {@link ui.router.state.$state#go $state.go()}
 */
$StateRefDirective.$inject = [&#x27;$state&#x27;, &#x27;$timeout&#x27;];
function $StateRefDirective($state, $timeout) {
  var allowedOptions = [&#x27;location&#x27;, &#x27;inherit&#x27;, &#x27;reload&#x27;, &#x27;absolute&#x27;];

  return {
    restrict: &#x27;A&#x27;,
    require: [&#x27;?^uiSrefActive&#x27;, &#x27;?^uiSrefActiveEq&#x27;],
    link: function(scope, element, attrs, uiSrefActive) {
      var ref = parseStateRef(attrs.uiSref, $state.current.name);
      var params = null, url = null, base = stateContext(element) || $state.$current;
      // SVGAElement does not use the href attribute, but rather the &#x27;xlinkHref&#x27; attribute.
      var hrefKind = Object.prototype.toString.call(element.prop(&#x27;href&#x27;)) === &#x27;[object SVGAnimatedString]&#x27; ?
                 &#x27;xlink:href&#x27; : &#x27;href&#x27;;
      var newHref = null, isAnchor = element.prop(&quot;tagName&quot;).toUpperCase() === &quot;A&quot;;
      var isForm = element[0].nodeName === &quot;FORM&quot;;
      var attr = isForm ? &quot;action&quot; : hrefKind, nav = true;

      var options = { relative: base, inherit: true };
      var optionsOverride = scope.$eval(attrs.uiSrefOpts) || {};

      angular.forEach(allowedOptions, function(option) {
        if (option in optionsOverride) {
          options[option] = optionsOverride[option];
        }
      });

      var update = function(newVal) {
        if (newVal) params = angular.copy(newVal);
        if (!nav) return;

        newHref = $state.href(ref.state, params, options);

        var activeDirective = uiSrefActive[1] || uiSrefActive[0];
        if (activeDirective) {
          activeDirective.$$addStateInfo(ref.state, params);
        }
        if (newHref === null) {
          nav = false;
          return false;
        }
        attrs.$set(attr, newHref);
      };

      if (ref.paramExpr) {
        scope.$watch(ref.paramExpr, function(newVal, oldVal) {
          if (newVal !== params) update(newVal);
        }, true);
        params = angular.copy(scope.$eval(ref.paramExpr));
      }
      update();

      if (isForm) return;

      element.bind(&quot;click&quot;, function(e) {
        var button = e.which || e.button;
        if ( !(button &gt; 1 || e.ctrlKey || e.metaKey || e.shiftKey || element.attr(&#x27;target&#x27;)) ) {
          // HACK: This is to allow ng-clicks to be processed before the transition is initiated:
          var transition = $timeout(function() {
            $state.go(ref.state, params, options);
          });
          e.preventDefault();

          // if the state has no URL, ignore one preventDefault from the &lt;a&gt; directive.
          var ignorePreventDefaultCount = isAnchor &amp;&amp; !newHref ? 1: 0;
          e.preventDefault = function() {
            if (ignorePreventDefaultCount-- &lt;= 0)
              $timeout.cancel(transition);
          };
        }
      });
    }
  };
}

/**
 * @ngdoc directive
 * @name ui.router.state.directive:ui-sref-active
 *
 * @requires ui.router.state.$state
 * @requires ui.router.state.$stateParams
 * @requires $interpolate
 *
 * @restrict A
 *
 * @description
 * A directive working alongside ui-sref to add classes to an element when the
 * related ui-sref directive&#x27;s state is active, and removing them when it is inactive.
 * The primary use-case is to simplify the special appearance of navigation menus
 * relying on &#x60;ui-sref&#x60;, by having the &quot;active&quot; state&#x27;s menu button appear different,
 * distinguishing it from the inactive menu items.
 *
 * ui-sref-active can live on the same element as ui-sref or on a parent element. The first
 * ui-sref-active found at the same level or above the ui-sref will be used.
 *
 * Will activate when the ui-sref&#x27;s target state or any child state is active. If you
 * need to activate only when the ui-sref target state is active and *not* any of
 * it&#x27;s children, then you will use
 * {@link ui.router.state.directive:ui-sref-active-eq ui-sref-active-eq}
 *
 * @example
 * Given the following template:
 * &lt;pre&gt;
 * &lt;ul&gt;
 *   &lt;li ui-sref-active=&quot;active&quot; class=&quot;item&quot;&gt;
 *     &lt;a href ui-sref=&quot;app.user({user: &#x27;bilbobaggins&#x27;})&quot;&gt;@bilbobaggins&lt;/a&gt;
 *   &lt;/li&gt;
 * &lt;/ul&gt;
 * &lt;/pre&gt;
 *
 *
 * When the app state is &quot;app.user&quot; (or any children states), and contains the state parameter &quot;user&quot; with value &quot;bilbobaggins&quot;,
 * the resulting HTML will appear as (note the &#x27;active&#x27; class):
 * &lt;pre&gt;
 * &lt;ul&gt;
 *   &lt;li ui-sref-active=&quot;active&quot; class=&quot;item active&quot;&gt;
 *     &lt;a ui-sref=&quot;app.user({user: &#x27;bilbobaggins&#x27;})&quot; href=&quot;/users/bilbobaggins&quot;&gt;@bilbobaggins&lt;/a&gt;
 *   &lt;/li&gt;
 * &lt;/ul&gt;
 * &lt;/pre&gt;
 *
 * The class name is interpolated **once** during the directives link time (any further changes to the
 * interpolated value are ignored).
 *
 * Multiple classes may be specified in a space-separated format:
 * &lt;pre&gt;
 * &lt;ul&gt;
 *   &lt;li ui-sref-active=&#x27;class1 class2 class3&#x27;&gt;
 *     &lt;a ui-sref=&quot;app.user&quot;&gt;link&lt;/a&gt;
 *   &lt;/li&gt;
 * &lt;/ul&gt;
 * &lt;/pre&gt;
 */

/**
 * @ngdoc directive
 * @name ui.router.state.directive:ui-sref-active-eq
 *
 * @requires ui.router.state.$state
 * @requires ui.router.state.$stateParams
 * @requires $interpolate
 *
 * @restrict A
 *
 * @description
 * The same as {@link ui.router.state.directive:ui-sref-active ui-sref-active} but will only activate
 * when the exact target state used in the &#x60;ui-sref&#x60; is active; no child states.
 *
 */
$StateRefActiveDirective.$inject = [&#x27;$state&#x27;, &#x27;$stateParams&#x27;, &#x27;$interpolate&#x27;];
function $StateRefActiveDirective($state, $stateParams, $interpolate) {
  return  {
    restrict: &quot;A&quot;,
    controller: [&#x27;$scope&#x27;, &#x27;$element&#x27;, &#x27;$attrs&#x27;, function ($scope, $element, $attrs) {
      var states = [], activeClass;

      // There probably isn&#x27;t much point in $observing this
      // uiSrefActive and uiSrefActiveEq share the same directive object with some
      // slight difference in logic routing
      activeClass = $interpolate($attrs.uiSrefActiveEq || $attrs.uiSrefActive || &#x27;&#x27;, false)($scope);

      // Allow uiSref to communicate with uiSrefActive[Equals]
      this.$$addStateInfo = function (newState, newParams) {
        var state = $state.get(newState, stateContext($element));

        states.push({
          state: state || { name: newState },
          params: newParams
        });

        update();
      };

      $scope.$on(&#x27;$stateChangeSuccess&#x27;, update);

      // Update route state
      function update() {
        if (anyMatch()) {
          $element.addClass(activeClass);
        } else {
          $element.removeClass(activeClass);
        }
      }

      function anyMatch() {
        for (var i = 0; i &lt; states.length; i++) {
          if (isMatch(states[i].state, states[i].params)) {
            return true;
          }
        }
        return false;
      }

      function isMatch(state, params) {
        if (typeof $attrs.uiSrefActiveEq !== &#x27;undefined&#x27;) {
          return $state.is(state.name, params);
        } else {
          return $state.includes(state.name, params);
        }
      }
    }]
  };
}

angular.module(&#x27;ui.router.state&#x27;)
  .directive(&#x27;uiSref&#x27;, $StateRefDirective)
  .directive(&#x27;uiSrefActive&#x27;, $StateRefActiveDirective)
  .directive(&#x27;uiSrefActiveEq&#x27;, $StateRefActiveDirective);

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
